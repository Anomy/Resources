!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[(new e.Error).stack]=function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])}return e}({},e._sentryModuleMetadata[(new e.Error).stack],{"_sentryBundlerPluginAppKey:ign-kraken-app":!0})}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7989],{8985:(e,n,i)=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WikiPage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"chapter"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"revision"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"wiki"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}},{kind:"Argument",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"chapter"}}},{kind:"Argument",name:{kind:"Name",value:"redirect"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"page"},arguments:[{kind:"Argument",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"chapter"}}},{kind:"Argument",name:{kind:"Name",value:"revision"},value:{kind:"Variable",name:{kind:"Name",value:"revision"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"locked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"revisionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasVideo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageForTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mapMarker"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"markerSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"objectSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mapSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"markerName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"typeSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lat"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lng"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"htmlEntities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"nextPage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"prevPage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"checklistTasks"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"checklistTask"},directives:[]},{kind:"Field",name:{kind:"Name",value:"checkboxSlug"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:764}};t.loc.source={body:"#import './checklists/checklistTaskFieldsFragment.gql'\n\nquery WikiPage($slug: String!, $chapter: String, $revision: Int) {\n  wiki(slug: $slug, title: $chapter, redirect: true) {\n    id\n    page(title: $chapter, revision: $revision) {\n      id\n      title\n      updatedAt\n      publishDate\n      locked\n      revisionId\n      thin\n      hasVideo\n      imageForTitle\n      mapMarker {\n        id\n        markerSlug\n        objectSlug\n        mapSlug\n        markerName\n        typeSlug\n        lat\n        lng\n      }\n      htmlEntities {\n        name\n        values\n      }\n      nextPage {\n        label\n        url\n      }\n      prevPage {\n        label\n        url\n      }\n      checklistTasks {\n        ...checklistTask\n        checkboxSlug\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};t.definitions=t.definitions.concat(i(990).definitions.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!r[n]&&(r[n]=!0,!0)}));var a={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),a[e.name.value]=n}}),e.exports=t,e.exports.WikiPage=function(e,n){var i={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=a[n]||new Set,r=new Set,l=new Set;for(t.forEach(function(e){l.add(e)});l.size>0;){var s=l;l=new Set,s.forEach(function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach(function(e){l.add(e)}))})}return r.forEach(function(n){var t=o(e,n);t&&i.definitions.push(t)}),i}(t,"WikiPage")},27330:(e,n,i)=>{"use strict";i.d(n,{A:()=>v,Y:()=>m});var t=i(42969),r=i(59860),a=i(14232),o=i(48694),l=i.n(o),s=i(80276),d=i(96972),u=["variables"];function c(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,t)}return i}var m=function(e){var n=e.variables,i=(0,r.A)(e,u);return(0,d.A)(function(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?c(Object(i),!0).forEach(function(n){(0,t.A)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}({purge:"Wiki Navigation",query:l(),variables:n,dataPath:"wiki"},i))};let v=function(e){var n=e.slug,i=e.chapter,t=m({variables:{slug:n}}).data,r=(null!=t?t:{}).navigation,o=void 0===r?[]:r;return(0,a.useMemo)(function(){return(0,s.p4)({slug:n,chapter:i,navigation:o})},[n,i,o])}},39938:(e,n,i)=>{"use strict";i.d(n,{Cy:()=>T,KN:()=>W,QA:()=>j,R5:()=>w,UG:()=>G,Uo:()=>Q,Yg:()=>B,ZL:()=>I,az:()=>v,b:()=>k,e3:()=>J,fx:()=>K,g6:()=>Y,gL:()=>z,pT:()=>U});var t=i(44478),r=i(42969),a=i(44661),o=i(22624),l=i(95062),s=i(31198),d=i.n(s),u=i(52536);function c(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,t)}return i}function m(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?c(Object(i),!0).forEach(function(n){(0,r.A)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var v={LOCATIONS_LAYER_ID:"locations",REGIONS_FILL_LAYER_ID:"region-fill",SUBREGIONS_FILL_LAYER_ID:"subregion-fill",CUSTOM_MARKERS_LAYER_ID:"custom-markers-layer",EDITING_CUSTOM_MARKER_LAYER_ID:"editing-custom-marker-layer",HEATMAP_LAYER_ID:"heatmap-layer"},k={LOCATIONS_DATA_SOURCE:"locations-data",REGIONS_DATA_SOURCE:"regions-data",SUBREGIONS_DATA_SOURCE:"subregions-data",CUSTOM_MARKERS_DATA_SOURCE:"custom-markers-source",EDITING_CUSTOM_MARKER_DATA_SOURCE:"editing-custom-marker-source",HEATMAP_DATA_SOURCE:"heatmap-data-source"},g=v.LOCATIONS_LAYER_ID,p=v.REGIONS_FILL_LAYER_ID,f=v.SUBREGIONS_FILL_LAYER_ID,y=v.CUSTOM_MARKERS_LAYER_ID,S=v.EDITING_CUSTOM_MARKER_LAYER_ID,b=v.HEATMAP_LAYER_ID,h=k.LOCATIONS_DATA_SOURCE,N=k.REGIONS_DATA_SOURCE,O=k.SUBREGIONS_DATA_SOURCE,A=k.CUSTOM_MARKERS_DATA_SOURCE,F=k.EDITING_CUSTOM_MARKER_DATA_SOURCE,E=k.HEATMAP_DATA_SOURCE,I=function(e){var n=e.marker||{},i=n.id,t=n.objectId,r=n.userId,a=n.checklistTaskId,o=n.mapSlug,l=n.name,s=n.color,d=n.description,u=n.regionId,c=n.createdAt,m=n.updatedAt,v=n.lat,k=n.lng;return{id:i,type:"Feature",properties:{id:i,mapSlug:o,name:l,description:d,regionId:u,color:s,checklistTaskId:a,objectId:t,userId:r,updatedAt:m,createdAt:c,lng:k,lat:v},geometry:{type:"Point",coordinates:[k,v]}}},w=function(e){var n=e.markers,i=e.term;return n.filter(function(e){var n,t;return"".concat(null==e||null==(n=e.name)?void 0:n.toLowerCase().trim()," ").concat(null==e||null==(t=e.description)?void 0:t.toLowerCase().trim()).includes(i.toLowerCase().trim())})},T=function(e){var n=e||{},i=n.name;return m({isCustom:!0,markerName:void 0===i?"Custom Marker":i,markerDescription:n.description},e)},C=function(e){var n=e.customMarkers;return{type:"geojson",data:{type:"FeatureCollection",features:void 0===n?[]:n}}},_=function(e){var n=e.overlays;return n?{type:"geojson",data:{type:"FeatureCollection",features:n.map(function(e){return e.markers.map(function(n){return P({marker:n,overlay:e})})}).flat()}}:null},P=function(e){var n=e.marker,i=n.id,t=n.typeSlug,r=n.markerSlug,a=n.markerName,o=n.lat,l=n.lng,s=n.checklistTaskId,d=n.wikiPage,u=n.iconSlug;return{id:r,type:"Feature",properties:{id:i,locationId:r,category_id:t,regionId:n.regionId,icon:u,typeSlug:t,markerSlug:r,markerName:a,checklistTaskId:s,wikiPage:d,lng:l,lat:o},geometry:{type:"Point",coordinates:[l,o]}}},j=function(e){var n={type:"geojson",data:{type:"FeatureCollection",features:[]}};if(!e||!(null!=e&&e.length))return n;var i=[];return e.forEach(function(e){var n,t=e.lat,r=e.lng,a=e.geometry,o=a.type,l=a.coordinates,s={lat:t,lng:r};if(!t||!r){if(!(null!=l&&null!=(n=l[0])&&n.length))return;s=$({type:o,coordinates:l})}s&&i.push(R({region:e,center:s})),"Polygon"===o&&i.push(D({region:e}))}),n.data.features=i,n},D=function(e){var n=e.region,i=n.id,t=n.geometry;return{id:i,type:"Feature",properties:{id:i},geometry:{type:t.type,coordinates:[t.coordinates]}}},R=function(e){var n=e.region,i=e.center,t=n.id,r=n.title,a=i.lat;return{id:t,type:"Feature",properties:{id:t,title:r},geometry:{type:"Point",coordinates:[i.lng,a]}}},M=function(e){var n=e.id,i=e.source,t=e.regionSettings,r=t.regionBorderPaint,a=t.subregionBorderPaint,o=i===O;return{id:n,type:"line",source:i,layout:{visibility:"visible"},paint:o?a:r}},x=function(e){var n=e.id,i=e.source,t=e.regionSettings,r=t.regionFillPaint,a=t.subregionFillPaint,o=i===O;return{id:n,type:"fill",source:i,layout:{visibility:"visible"},paint:o?a:r}},L=function(e){var n=e.id,i=e.source,t=e.regionSettings,r=i===O,a=t.regionTextStops,o=t.subregionTextStops,l=t.regionTitlesPaint,s=t.subregionTitlesPaint;return{id:n,type:"symbol",source:i,filter:["==","$type","Point"],layout:{"text-allow-overlap":!0,"text-field":"{title}","text-ignore-placement":!0,"text-letter-spacing":0,"text-max-width":250,"text-transform":"uppercase","text-font":["Open Sans Semibold"],"text-size":{stops:r?o:a},visibility:"visible"},paint:r?s:l}},U=function(e){var n,i={type:"geojson",data:{type:"FeatureCollection",features:[]}};if(!e||!(null!=e&&e.length))return i;var r=[];return e.forEach(function(e){r=[].concat((0,t.A)(r),(0,t.A)(e.categories))}),i.data.features=null==(n=r)?void 0:n.map(function(e){var n;return{type:"Feature",properties:{id:e.id,groupId:e.groupId},geometry:{type:"GeometryCollection",geometries:null==e||null==(n=e.points)?void 0:n.map(function(e){return{type:"Point",coordinates:[e.x,e.y]}})}}}),i},V=function(e){var n=e.markerSpriteUrl;return(0,a.A)(n,/(\/markers.*\?)/,"/markers?")},G=function(e){var n=e.map,i=e.selectedOverlays,t=e.searchResults,r=e.incompletedMarkersHidden,a=e.completedMarkersHidden,l=e.mapCompletedTaskIds,s=e.selectedRegions,d=e.selectedMarkers,u=e.noteMarkerIds,c=e.showNoteMarkers,m=e.showCustomMarkers,v=e.userChecklistsTaskIds,k=e.showingUserChecklistMarkers,p=e.userMapMarkerSearchResults;if((0,o.A)(t))if((0,o.A)(d)){var f=!a||["!",["in",["get","checklistTaskId"],["literal",l]]],S=!r||["in",["get","checklistTaskId"],["literal",l]],b=!s.length||["in",["get","regionId"],["literal",s]],h=!c||["in",["get","id"],["literal",u]],N=!k||["in",["get","checklistTaskId"],["literal",v]];n.current.setFilter(g,["all",["in",["get","category_id"],["literal",i]],f,S,b,h,!m,N]),n.current.setFilter(y,["all",f,S,b,h,N])}else n.current.setFilter(g,["in",["get","markerSlug"],["literal",d]]),n.current.setFilter(y,["boolean",!1]);else{var O=p.map(function(e){return e.id});n.current.setFilter(g,["in",["get","locationId"],["literal",t.markerSlugs]]),n.current.setFilter(y,["in",["get","id"],["literal",O]])}};G.propTypes={map:l.object,selectedOverlays:l.array,searchResults:l.array,incompletedMarkersHidden:l.bool,completedMarkersHidden:l.bool,mapCompletedTaskIds:l.array};var z=function(e){var n=e.map,i=e.selectedCategory;n.current.setFilter(b,["==",["get","id"],i])},W=function(e){var n=e.map,i=e.mapCompletedTaskIds;n.current.setPaintProperty(g,"icon-opacity",["case",["in",["get","checklistTaskId"],["literal",i]],.45,1]),n.current.setPaintProperty(y,"icon-opacity",["case",["in",["get","checklistTaskId"],["literal",i]],.45,1])};W.propTypes={map:l.object,mapCompletedTaskIds:l.array};var Y=function(e){var n=e.type,i=e.coordinates,t=e.mapRef,r=q({type:n,coordinates:i});r&&t.current.fitBounds(r)},$=function(e){var n=q({type:e.type,coordinates:e.coordinates});return(null==n?void 0:n.getCenter())||[null,null]},B=function(e){var n=new(d()).LngLatBounds;return e.forEach(function(e){n.extend(e)}),n},q=function(e){var n=e.type,i=e.coordinates;return"Polygon"===n||"MultiPolygon"===n?B(i):null},K=function(e){var n=e.mapRef,i=e.coords,r=n.current,a=[].concat((0,t.A)(r.style.hasLayer(p)?[p]:[]),(0,t.A)(r.style.hasLayer(f)?[f]:[])),o=null,l=null;return r.queryRenderedFeatures(r.project(i),{layers:a}).forEach(function(e){var n;switch(null==e||null==(n=e.layer)?void 0:n.id){case p:o=null==e?void 0:e.id;break;case f:l=null==e?void 0:e.id}}),l||o},H=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#fff";e.save(),e.strokeStyle="rgba(0,0,0,0)",e.miterLimit=4,e.font="15px ''",e.fillStyle="rgba(0,0,0,0)",e.font="   15px ''",e.save(),e.fillStyle="#fff",e.font="   15px ''",e.beginPath(),e.moveTo(38.753,27.277),e.translate(24.568017166775828,20.023388070682614),e.rotate(0),e.arc(0,0,15.932,.4726930855771008,-.001467993916825061,1),e.rotate(0),e.translate(-24.568017166775828,-20.023388070682614),e.bezierCurveTo(40.5,11.163,33.337,4,24.5,4),e.bezierCurveTo(15.662999999999997,4,8.5,11.163,8.5,20),e.bezierCurveTo(8.5,22.62,9.13,25.094,10.247,27.277),e.bezierCurveTo(13.27,33.808,19.546,39.503,23.627000000000002,43.207),e.bezierCurveTo(23.931,43.482,24.223000000000003,43.747,24.500000000000004,44),e.lineTo(25.373000000000005,43.206),e.bezierCurveTo(29.454000000000004,39.503,35.730000000000004,33.80800000000001,38.75300000000001,27.276000000000003),e.closePath(),e.moveTo(24.5,30),e.bezierCurveTo(30.023,30,34.5,25.523,34.5,20),e.bezierCurveTo(34.5,14.477,30.023,10,24.5,10),e.bezierCurveTo(18.977,10,14.5,14.477,14.5,20),e.bezierCurveTo(14.5,25.523,18.977,30,24.5,30),e.closePath(),e.fill("evenodd"),e.stroke(),e.restore(),e.save(),e.fillStyle=n,e.font="   15px ''",e.beginPath(),e.arc(24.5,20,10,0,6.283185307179586,!1),e.closePath(),e.fill(),e.stroke(),e.restore(),e.save(),e.strokeStyle="#8A9399",e.strokeStyle="rgba(138, 147, 153, 0.15)",e.font="   15px ''",e.beginPath(),e.arc(24.5,20,9.5,0,6.283185307179586,!1),e.closePath(),e.stroke(),e.restore(),e.restore()},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#fff";return{width:48,height:48,data:new Uint8Array(9216),onAdd:function(){var n=document.createElement("canvas");n.width=this.width,n.height=this.height,this.context=n.getContext("2d");var i=this.context;H(i,e),this.data=i.getImageData(0,0,this.width,this.height).data},render:function(){return!0}}},Z=function(e){var n=e.mapGenieGameId,i=e.mapId,t=(0,u.ul)({gameId:n,mapId:i}),r=t.showRegionPolygons,a=t.showRegionPolygonBorders,o=t.showRegionTitles,l=t.showSubregionPolygonBorders,s=t.showSubregionPolygons,d=t.showSubregionTitles,c=M({id:"region-borders",source:N,regionSettings:t}),m=x({id:"region-fill",source:N,regionSettings:t}),v=L({id:"region-titles",source:N,regionSettings:t}),k=M({id:"subregion-borders",source:O,regionSettings:t}),p=x({id:"subregion-fill",source:O,regionSettings:t}),f=L({id:"subregion-titles",source:O,regionSettings:t}),I=[];return I.push({id:"map-tiles",type:"raster",source:"raster-tiles"}),r&&I.push(m),s&&I.push(p),a&&I.push(c),l&&I.push(k),I.push({id:b,type:"heatmap",source:E,paint:(0,u.as)(n).paintSettings,filter:!1}),o&&I.push(v),d&&I.push(f),I.push({id:g,type:"symbol",source:h,layout:{"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"{icon}","icon-size":1,"icon-anchor":"bottom",visibility:"visible"},paint:{"icon-opacity":1}}),I.push({id:y,type:"symbol",source:A,layout:{"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"{color}","icon-size":1,"icon-anchor":"bottom"},paint:{"icon-opacity":1}}),I.push({id:S,type:"symbol",source:F,layout:{"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"{color}","icon-size":1,"icon-anchor":"bottom"},paint:{"icon-opacity":1}}),I},J=function(e){var n,i=e.markerSpriteUrl,t=e.tiles,a=e.mapGenieGameId,o=e.mapId,l=e.overlays,s=e.additionalSources,d=Z({mapGenieGameId:a,mapId:o});return{version:8,sprite:V({markerSpriteUrl:i}),glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:m((n={"raster-tiles":{type:"raster",scheme:"xyz",tiles:t,tileSize:256,bounds:(0,u.ES)({gameId:a,mapId:o})}},(0,r.A)(n,h,_({overlays:l})),(0,r.A)(n,A,C({customMarkers:[]})),(0,r.A)(n,F,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),(0,r.A)(n,N,j()),(0,r.A)(n,O,j()),(0,r.A)(n,E,U()),n),void 0===s?{}:s),layers:d}}},41735:e=>{var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WikiLatestUpdates"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nextCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"count"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"latestWikiUpdates"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}},{kind:"Argument",name:{kind:"Name",value:"nextCursor"},value:{kind:"Variable",name:{kind:"Name",value:"nextCursor"}}},{kind:"Argument",name:{kind:"Name",value:"count"},value:{kind:"Variable",name:{kind:"Name",value:"count"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"wikis"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"revisionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recentEditor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nickname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"update"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"newLength"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"revisionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previousRevisionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isMore"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nextCursor"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:642}};n.loc.source={body:"query WikiLatestUpdates($slug: String, $nextCursor: String, $count: Int) {\n  latestWikiUpdates(slug: $slug, nextCursor: $nextCursor, count: $count) {\n    wikis {\n      name\n      slug\n      page {\n        title\n        url\n        revisionId\n        recentEditor {\n          id\n          nickname\n          displayName\n          thumbnailUrl\n        }\n        update {\n          type\n          timestamp\n          title\n          oldTitle\n          oldLength\n          newLength\n          revisionId\n          previousRevisionId\n          comment\n        }\n      }\n    }\n    pagination {\n      count\n      isMore\n      nextCursor\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.WikiLatestUpdates=function(e,n){var r={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=i[n]||new Set,o=new Set,l=new Set;for(a.forEach(function(e){l.add(e)});l.size>0;){var s=l;l=new Set,s.forEach(function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach(function(e){l.add(e)}))})}return o.forEach(function(n){var i=t(e,n);i&&r.definitions.push(i)}),r}(n,"WikiLatestUpdates")},48694:e=>{var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WikiNavigation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"wiki"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"maps"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mapName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mapSlug"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"navigation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subnav"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subnav"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:270}};n.loc.source={body:"query WikiNavigation($slug: String!) {\n  wiki(slug: $slug) {\n    id\n    maps {\n      mapName\n      mapSlug\n    }\n    navigation {\n      label\n      url\n      subnav {\n        label\n        url\n        subnav {\n          label\n          url\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.WikiNavigation=function(e,n){var r={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=i[n]||new Set,o=new Set,l=new Set;for(a.forEach(function(e){l.add(e)});l.size>0;){var s=l;l=new Set,s.forEach(function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach(function(e){l.add(e)}))})}return o.forEach(function(n){var i=t(e,n);i&&r.definitions.push(i)}),r}(n,"WikiNavigation")},56441:(e,n,i)=>{"use strict";i.d(n,{A:()=>l});var t=i(54604),r=i.n(t);i(14232);var a=i(92141),o=i(37876);let l=function(){return{styles:(0,o.jsx)(r(),{id:"1384142789",dynamic:[a.A.mediumUp],children:[".form-buttons.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;grid-gap:var(--compactSpacer);-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;grid-auto-columns:1fr;}",".form-buttons.left-justified.__jsx-style-dynamic-selector{direction:rtl;}",".form-buttons.centered.__jsx-style-dynamic-selector{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}",".form-buttons.__jsx-style-dynamic-selector .hidden{visibility:hidden;}","@media (".concat(a.A.mediumUp,"){.form-buttons.__jsx-style-dynamic-selector:not(.full-width){grid-auto-columns:minmax(auto,200px);}}")]}),className:r().dynamic([["1384142789",[a.A.mediumUp]]])}}},76261:(e,n,i)=>{"use strict";i.d(n,{jq:()=>h,rY:()=>b,yE:()=>N});var t=i(42969),r=i(14232),a=i(89099),o=i.n(a),l=i(69268),s=i(82927),d=i(20917),u=i(75961),c=i(22810),m=i(268),v=i(37876);function k(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,t)}return i}function g(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?k(Object(i),!0).forEach(function(n){(0,t.A)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var p=(0,r.createContext)({}),f=(0,r.createContext)([]),y=["Guide","TaskSearch","Checklists","Maps"],S={initialView:l.E_.OVERVIEW,scrollToTop:!0},b=function(e){var n=e.objectId,i=e.paywall,a=e.children,l=(0,r.useState)(m.vB),k=l[0],b=l[1],h=(0,r.useCallback)(function(e){b(function(n){return n[e.id]?n:g(g({},n),{},(0,t.A)({},e.id,e))})},[]);(0,r.useEffect)(function(){var e=function(){return b(m.vB)};return o().events.on("routeChangeStart",e),function(){o().events.off("routeChangeStart",e)}},[b]);var N=(0,r.useMemo)(function(){return Object.values(k)},[k]),O=(0,r.useMemo)(function(){return{objectId:n,hasChecklists:!!n,registerSection:h}},[n,h]);return(0,v.jsx)(s.Ye,{initialViewProps:S,objectId:n,children:(0,v.jsx)(d.N,{objectId:n,children:(0,v.jsx)(u.Ny,{objectId:n,paywall:i,children:(0,v.jsx)(c.O_,{tabLabels:y,children:(0,v.jsx)(p.Provider,{value:O,children:(0,v.jsx)(f.Provider,{value:N,children:a})})})})})})},h=function(){return(0,r.useContext)(p)},N=function(){return(0,r.useContext)(f)}},87744:(e,n,i)=>{"use strict";i.d(n,{M:()=>y,O:()=>S});var t=i(42969),r=i(27925),a=i(14232),o=i(22624),l=i(22917),s=i(77931),d=i(54654),u=i(60236),c=i(39938),m=i(37876);function v(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,t)}return i}function k(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?v(Object(i),!0).forEach(function(n){(0,t.A)(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}var g=c.b.CUSTOM_MARKERS_DATA_SOURCE,p=c.b.EDITING_CUSTOM_MARKER_DATA_SOURCE,f=(0,a.createContext)(),y=function(e){var n=e.children,i=(0,u.E0)(),t=i.marker,v=i.mapRef,y=i.map,S=i.userMapMarkers,b=i.updateMarker,h=i.popupViews,N=(0,d.a)().upsertUserMapMarker,O=(0,a.useRef)({}),A=(0,a.useRef)(null),F=(0,s.A)(!1),E=(0,r.A)(F,2),I=E[0],w=E[1],T=function(e){O.current=e.marker},C=(0,a.useCallback)(function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.lng,t=n.lat,r=O.current;i&&t&&(r=k(k({},r),{},{geometry:k(k({},null==(e=r)?void 0:e.geometry),{},{coordinates:[i,t]})})),v.current.getSource(p).setData({type:"FeatureCollection",features:[r]})},[v,O]),_=(0,l.A)(function(e){var n;if(e.features[0].id===(null==(n=O.current)?void 0:n.id)&&(0,o.A)(t))switch(e.preventDefault(),A.current.remove(),C(),R({filterSelected:!0}),e.type){case"mousedown":v.current.on("mousemove",P),v.current.once("mouseup",j);break;case"touchstart":v.current.on("touchmove",P),v.current.once("touchend",j)}}),P=function(e){var n=e.lngLat;C({lng:n.lng,lat:n.lat}),"mousemove"===e.type&&(v.current.getCanvas().style.cursor="grabbing")},j=function(e){var n=e.lngLat,i=[n.lng,n.lat],t=O.current;O.current=k(k({},t),{},{geometry:k(k({},null==t?void 0:t.geometry),{},{coordinates:i})}),A.current.setLngLat(i).addTo(v.current),v.current.getCanvas().style.cursor="",v.current.off("mousemove",P),v.current.off("touchmove",P)},D=(0,a.useCallback)(function(){return S.map(function(e){var n=e.id,i=e.objectId,t=e.userId,r=e.checklistTaskId,a=e.mapSlug,o=e.name,l=e.color,s=e.description,d=e.regionId,u=e.createdAt,c=e.updatedAt,m=e.lat,v=e.lng;return{id:n,type:"Feature",properties:{id:n,mapSlug:a,name:o,description:s,regionId:d,color:l,checklistTaskId:r,objectId:i,userId:t,updatedAt:c,createdAt:u,lng:v,lat:m},geometry:{type:"Point",coordinates:[v,m]}}})},[S]),R=(0,a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.filterSelected,i=D();void 0!==n&&n&&(i=i.filter(function(e){var n;return e.id!==(null==(n=O.current)?void 0:n.id)})),v.current.getSource(g).setData({type:"FeatureCollection",features:i})},[D,v,O]),M=(0,a.useCallback)(function(){O.current={},A.current.remove(),R(),C()},[A,O,R,C]);return(0,a.useEffect)(function(){var e=O.current;(null!=e&&e.id||(null==e?void 0:e.id)===0)&&(null!=t&&t.id||(null==t?void 0:t.id)===0)&&O.current.id!==(null==t?void 0:t.id)&&M()},[t,O,M]),(0,m.jsx)(f.Provider,{value:{addCustomMarker:function(e){var n=e.markerInfo;if(A.current&&v.current){var i=n.coords;O.current={id:0,type:"Feature",properties:{id:0,slug:"",name:"",description:"",regionId:"",color:"#fff"},geometry:{type:"Point",coordinates:i}},A.current.setLngLat(i).addTo(v.current),C(),R({filterSelected:!0}),b({})}},saveCustomMarker:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,c.fx)({mapRef:v,coords:O.current.geometry.coordinates}),t=k(k(k({},O.current.properties),n),{},{regionId:i}),r=k(k({},O.current),{},{properties:t});N({marker:{id:r.properties.id||void 0,objectId:null==y||null==(e=y.object)?void 0:e.id,mapSlug:null==y?void 0:y.mapSlug,name:r.properties.name,color:r.properties.color,description:r.properties.description,regionId:null!=i?i:null,lng:r.geometry.coordinates[0],lat:r.geometry.coordinates[1]}}),(0,d.fW)("Marker Saved"),O.current={},C()},drawCustomMarkers:R,removeCustomMarker:M,beginRepositioning:function(e){T({marker:e.marker}),R({filterSelected:!0}),C(),A.current.setLngLat(O.current.geometry.coordinates).addTo(v.current),b({})},beginEditing:function(e){T({marker:e.marker}),null==h||h.swapView(u.mi.CUSTOM_MARKER_EDIT),A.current.remove()},setSelectedCustomMarker:T,getSelectedCustomMarker:function(){return O.current},handleCustomMarkerMove:_,customMarkerPopupRef:A,showCustomMarkers:I,toggleShowCustomMarkers:w},children:n})},S=function(){return(0,a.useContext)(f)}}}]);
//# sourceMappingURL=7989-67d43c24b93a7d8d.js.map