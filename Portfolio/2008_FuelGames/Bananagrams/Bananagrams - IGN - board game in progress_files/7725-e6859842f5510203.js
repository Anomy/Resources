!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[(new e.Error).stack]=function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var t in i)i.hasOwnProperty(t)&&(e[t]=i[t])}return e}({},e._sentryModuleMetadata[(new e.Error).stack],{"_sentryBundlerPluginAppKey:ign-kraken-app":!0})}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7725],{36104:e=>{var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateUserChecklistTasks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"checklistTaskIds"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"completed"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateUserChecklistTasks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"objectId"},value:{kind:"Variable",name:{kind:"Name",value:"objectId"}}},{kind:"Argument",name:{kind:"Name",value:"checklistTaskIds"},value:{kind:"Variable",name:{kind:"Name",value:"checklistTaskIds"}}},{kind:"Argument",name:{kind:"Name",value:"completed"},value:{kind:"Variable",name:{kind:"Name",value:"completed"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checklistTaskId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:261}};n.loc.source={body:"mutation UpdateUserChecklistTasks($objectId: ID!, $checklistTaskIds: [Int], $completed: Boolean!) {\n  updateUserChecklistTasks(objectId: $objectId, checklistTaskIds: $checklistTaskIds, completed: $completed) {\n    userId\n    checklistTaskId\n    completed\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.UpdateUserChecklistTasks=function(e,n){var a={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var s=i[n]||new Set,r=new Set,c=new Set;for(s.forEach(function(e){c.add(e)});c.size>0;){var o=c;c=new Set,o.forEach(function(e){r.has(e)||(r.add(e),(i[e]||new Set).forEach(function(e){c.add(e)}))})}return r.forEach(function(n){var i=t(e,n);i&&a.definitions.push(i)}),a}(n,"UpdateUserChecklistTasks")},53939:e=>{var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserChecklistTasks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userChecklistTasks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"objectId"},value:{kind:"Variable",name:{kind:"Name",value:"objectId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checklistTaskId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:138}};n.loc.source={body:"query UserChecklistTasks($objectId: ID!) {\n  userChecklistTasks(objectId: $objectId) {\n    userId\n    checklistTaskId\n    completed\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.UserChecklistTasks=function(e,n){var a={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var s=i[n]||new Set,r=new Set,c=new Set;for(s.forEach(function(e){c.add(e)});c.size>0;){var o=c;c=new Set,o.forEach(function(e){r.has(e)||(r.add(e),(i[e]||new Set).forEach(function(e){c.add(e)}))})}return r.forEach(function(n){var i=t(e,n);i&&a.definitions.push(i)}),a}(n,"UserChecklistTasks")},75961:(e,n,i)=>{"use strict";i.d(n,{Ny:()=>A,oJ:()=>x,zX:()=>U});var t=i(44478),a=i(27925),s=i(14232),r=i(73241),c=i(17648),o=i(54431),l=i(64177),d=i(53939),u=i.n(d),k=i(36104),f=i.n(k),v=i(87964),m=i.n(v),h=i(16463),p=i(60229),b=i(57256),T=i(52190),I=i(71004),g=i(27693),y=i(37876),N=[],S="user-task-progress",C={wiki:{event_label:"Wiki Page"},map:{event_label:"Map Marker"},checklist:{event_label:"Checklist Tab"},search:{event_label:"Task Search"},header:{event_label:"Header Dropdown"},datatable:{event_label:"Data Table"},video:{event_label:"Video Player"}},w={wiki:{label:"Checkboxes",ga4:"wikis_checklistreset"},map:{label:"Markers",ga4:"maps_markerreset"},checklist:{label:"Tasks",ga4:"checklists_taskreset"}},D=function(e){var n=e.objectId,i=(0,h.Ay)(S,N,{prefix:n}),r=(0,a.A)(i,2),c=r[0],o=r[1];return[c,(0,s.useCallback)(function(e){var n=e.checklistTaskIds,i=e.completed,a=e.via,s=e.onSuccess,r=new Date().toISOString();if(o(function(e){return i?[].concat((0,t.A)(e),(0,t.A)(n.filter(function(n){return!e.some(function(e){return e.checklistTaskId===n})}).map(function(e){return{checklistTaskId:e,completed:i,completedAt:r}}))):e.filter(function(e){return!n.includes(e.checklistTaskId)})}),i){var c=C[a].event_label;null==s||s("Checked All",(0,y.jsx)(I.A,{size:"xlarge"})),(0,p.GY)("user_checkbox",{event_category:"User Tools",event_action:"Checkbox",event_label:c,engagement:1})}},[o]),(0,s.useCallback)(function(e){var n=e.checklistTaskIds,i=e.via,t=e.onSuccess;o(function(e){return e.filter(function(e){return!n.includes(e.checklistTaskId)})});var a=w[i],s=a.label,r=a.ga4;null==t||t("".concat(s," Reset"),(0,y.jsx)(I.A,{size:"xlarge"})),(0,p.GY)(r)},[o])]},j=function(e){var n,i,t=e.objectId,r=(0,T.iZ)().id,c=(0,T.tg)(),d=(0,o.IT)(u(),{variables:{objectId:t},skip:!c||!t}).data,k=null!=(n=null==d||null==(i=d.userChecklistTasks)?void 0:i.filter(function(e){return e.completed}))?n:N,v=(0,l.n)(f(),{variables:{objectId:t},update:function(e,n){var i=n.data.updateUserChecklistTasks;return e.modify({fields:{userChecklistTasks:(0,b.Xq)({record:i,onlyWhen:function(e){return e.objectId===t},fieldKey:"checklistTaskId"})}})}}),D=(0,a.A)(v,1)[0],j=(0,s.useCallback)(function(e){var n=e.checklistTaskIds,i=e.completed,t=e.via,a=e.onSuccess,s=e.onFailure;return D({variables:{checklistTaskIds:n,completed:i},optimisticResponse:{updateUserChecklistTasks:n.map(function(e){return{userId:r,checklistTaskId:e,completed:i,__typename:"UserChecklistTask"}})},onCompleted:function(){if(i){var e=C[t].event_label;null==a||a("Checked All",(0,y.jsx)(I.A,{size:"xlarge"})),(0,p.GY)("user_checkbox",{event_category:"User Tools",event_action:"Checkbox",event_label:e,engagement:1})}},onError:function(e){return null==s?void 0:s(e.message)}})},[D,r]),E=(0,l.n)(m(),{variables:{objectId:t}}),_=(0,a.A)(E,1)[0],x=(0,s.useCallback)(function(e){var n=e.checklistTaskIds,i=e.via,t=e.onSuccess,a=e.onFailure;return _({variables:{checklistTaskIds:n},onCompleted:function(){var e=w[i],n=e.label,a=e.ga4;null==t||t("".concat(n," Reset"),(0,y.jsx)(I.A,{size:"xlarge"})),(0,p.GY)(a)},onError:function(e){return null==a?void 0:a(e.message)}})},[_]),A=(0,g.dN)(),U=A.onSuccess,V=A.onFailure;return(0,s.useEffect)(function(){if(c&&t){var e=(0,h.Gq)(S,N,{prefix:t});e.length&&D({variables:{checklistTaskIds:e.map(function(e){return e.checklistTaskId}),completed:!0},onCompleted:function(){null==U||U("Progress Saved",(0,y.jsx)(I.A,{size:"xlarge"})),(0,h.SO)(S,N,{prefix:t})},onError:function(e){return null==V?void 0:V(e.message)}})}},[c,t,V,U,D]),[k,j,x]};let E=function(e){var n=e.objectId,i=(0,T.tg)(),t=D({objectId:n}),a=j({objectId:n});return i?a:t};var _=(0,s.createContext)({userTasks:[],completedCount:0}),x=function(e){var n=e.checkCount,i=U(),t=i.paywall,a=i.completedCount;return(0,(0,r.go)().checkPlusSubscription)({requiresLogin:(0,c.c6)({completedCount:a,checkCount:n}),promotesPlus:(0,c.Mw)({paywall:t,completedCount:a,checkCount:n}),requiresPlus:(0,c.eU)({paywall:t,completedCount:a,checkCount:n}),purpose:r.b9.USER_TRACKING})},A=function(e){var n=e.objectId,i=e.paywall,r=e.children,c=E({objectId:n}),o=(0,a.A)(c,3),l=o[0],d=o[1],u=o[2],k=l.length,f=(0,s.useCallback)(function(e){var n=e.reduce(function(e,n){var i=(0,a.A)(e,2),s=i[0],r=i[1];return l.some(function(e){return e.checklistTaskId===n.id})?[[].concat((0,t.A)(s),[n]),r]:[s,[].concat((0,t.A)(r),[n])]},[[],[]]),i=(0,a.A)(n,2),s=i[0],r=i[1],c=s.map(function(e){return e.id}),o=r.map(function(e){return e.id});return{checked:s,unchecked:r,checkedIds:c,uncheckedIds:o}},[l]);return(0,y.jsx)(_.Provider,{value:{objectId:n,paywall:i,userTasks:l,toggleTask:d,resetTasks:u,completedCount:k,groupTasks:f},children:r})},U=function(){return(0,s.useContext)(_)}},87964:e=>{var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ResetUserChecklistTasks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"checklistTaskIds"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resetUserChecklistTasks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"objectId"},value:{kind:"Variable",name:{kind:"Name",value:"objectId"}}},{kind:"Argument",name:{kind:"Name",value:"checklistTaskIds"},value:{kind:"Variable",name:{kind:"Name",value:"checklistTaskIds"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checklistTaskId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:214}};n.loc.source={body:"mutation ResetUserChecklistTasks($objectId: ID!, $checklistTaskIds: [Int]) {\n  resetUserChecklistTasks(objectId: $objectId, checklistTaskIds: $checklistTaskIds) {\n    userId\n    checklistTaskId\n    completed\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function t(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}n.definitions.forEach(function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach(function(n){e(n,i)}),n.variableDefinitions&&n.variableDefinitions.forEach(function(n){e(n,i)}),n.definitions&&n.definitions.forEach(function(n){e(n,i)})}(e,n),i[e.name.value]=n}}),e.exports=n,e.exports.ResetUserChecklistTasks=function(e,n){var a={kind:e.kind,definitions:[t(e,n)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var s=i[n]||new Set,r=new Set,c=new Set;for(s.forEach(function(e){c.add(e)});c.size>0;){var o=c;c=new Set,o.forEach(function(e){r.has(e)||(r.add(e),(i[e]||new Set).forEach(function(e){c.add(e)}))})}return r.forEach(function(n){var i=t(e,n);i&&a.definitions.push(i)}),a}(n,"ResetUserChecklistTasks")},92239:(e,n,i)=>{"use strict";i.d(n,{Br:()=>u,Dh:()=>d,E9:()=>l,Ih:()=>c,P0:()=>s,R_:()=>o,uv:()=>r});var t=i(27925),a=i(71673)("kraken:lib:utils:videoplayer"),s=function(e){for(var n=[],i=0;i<e.length;i++)n.push({start:e.start(i),end:e.end(i)});return n},r=function(e){return null==e?void 0:e.includes(".m3u8")},c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i,t){var a=e(t);return!0===n[a]?i:(n[a]=!0,i.concat(t))}};function o(e){if("number"!=typeof e||isNaN(e))return"";if(e>=7680)return"8K";if(e>=3840)return"4K";if(e>=2560)return"2K";if(e>=1280)return"HD";else return"SD"}var l=function(e,n){var i=e.current.getBoundingClientRect(),t=((n.changedTouches?n.changedTouches[0].pageX:n.pageX)-i.left)/i.width;if("number"!=typeof t||isNaN(t))throw Error("Expected `position` to be a number");return t<0?0:t>1?1:t},d=function(e){var n=e.history,i=e.setHistory,t=e.videoId,s=e.pageType,r=e.playerContext,c=n.findIndex(function(e){return e.i===t}),o={i:t,t:new Date().getTime(),pt:s,ctxt:r};if(-1===c){var l=n.length>999?n.slice(0,-1):n;l.unshift(o);try{i(l)}catch(e){22===e.code&&a(e)}}else{n.splice(c,1),n.unshift(o);try{i(n)}catch(e){22===e.code&&a(e)}}},u=function(e){var n=e.split(":"),i=(0,t.A)(n,3),a=i[0],s=i[1],r=i[2];return 3600*parseInt(a,10)+60*parseInt(s,10)+parseInt(r,10)}},96959:(e,n,i)=>{"use strict";i.d(n,{$e:()=>o,Gu:()=>c,kA:()=>s});var t=i(75961),a=[],s=function(e){var n=e.taskIds,i=e.userTasks,t=n.filter(function(e){return i.some(function(n){return n.checklistTaskId===e})}),a=t.length;return{completedTaskIds:t,completedCount:a,completedPercentage:a>0?Math.floor(t.length/n.length*100):0}},r=function(e){var n=e.tasks,i=e.userTasks;return s({taskIds:n.map(function(e){return e.id}),userTasks:i})},c=function(e){var n=e.tasks;return r({tasks:void 0===n?a:n,userTasks:(0,t.zX)().userTasks})},o=function(e){var n,i,s=e.taskId,r=e.taskIds,c=void 0===r?a:r,o=(0,t.zX)().userTasks;return s?null!=(n=null==(i=o.find(function(e){return e.checklistTaskId===s}))?void 0:i.completed)&&n:!!c.length&&c.every(function(e){return o.some(function(n){return n.checklistTaskId===e&&n.completed})})}}}]);
//# sourceMappingURL=7725-e6859842f5510203.js.map